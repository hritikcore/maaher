<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Page - Maaher</title>
    <link rel="stylesheet" href="product-page.css" />
    <style>
      /* Add basic styling for cart drawer */
      .cart-drawer {
        display: none;
        position: fixed;
        right: 0;
        top: 0;
        width: 400px;
        height: 100%;
        background: #f8f8f8;
        box-shadow: -3px 0 5px rgba(0, 0, 0, 0.2);
        padding: 20px;
        z-index: 1000;
      }

      .cart-drawer.show {
        display: block;
      }

      .cart-counter {
        position: absolute;
        top: 20px;
        right: 10px;
        background-color: red;
        color: white;
        border-radius: 50%;
        padding: 2px 6px;
        font-size: 12px;
      }

      .cart-items-container {
        margin-top: 20px;
      }

      .cart-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
      }

      .cart-item img {
        width: 50px;
        height: 50px;
      }

      .cart-item-details {
        flex: 1;
        margin-left: 10px;
      }
    </style>
  </head>
  <body>
    <header class="header">
      <div class="logo">
        <!-- Add your SVG logo here -->
      </div>
      <div class="user-options">
        <!-- Cart SVG Icon with Cart Counter -->
        <a href="#" class="cart" onclick="toggleCartDrawer()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="20"
            viewBox="0 0 24 20"
            fill="none"
          >
            <path
              d="M1.8926 4.68439C2.05782 2.46576 3.9061 0.75 6.13087 0.75H17.2025C19.4272 0.75 21.2755 2.46576 21.4407 4.68438L22.1854 14.6844C22.369 17.1491 20.4187 19.25 17.9471 19.25H5.38619C2.91464 19.25 0.964377 17.1491 1.14792 14.6844L1.8926 4.68439Z"
              stroke="#351D0D"
              stroke-width="1.5"
            />
            <path
              d="M16.6666 2.77778V5.27778C16.6666 7.88579 14.5524 10 11.9444 10V10C9.33638 10 7.22217 7.88579 7.22217 5.27778V2.77778"
              stroke="#351D0D"
              stroke-width="0.5"
              stroke-linecap="round"
            />
          </svg>
          <span id="cart-counter" class="cart-counter">0</span>
        </a>
      </div>
    </header>

    <main class="product-page">
      <!-- Left Section: Product Images -->
      <div class="left-column">
        <div class="product-thumbnail">
          <img src="product1Images/image.png" alt="Product Thumbnail 1" />
        </div>
        <div class="product-thumbnail">
          <img src="product1Images/thumbnail2.png" alt="Product Thumbnail 2" />
        </div>
        <div class="product-thumbnail">
          <img src="product1Images/thumbnail3.png" alt="Product Thumbnail 3" />
        </div>
        <div class="product-thumbnail">
          <img src="product1Images/thumbnail4.png" alt="Product Thumbnail 4" />
        </div>
      </div>

      <!-- Center Section: Main Product Image -->
      <div class="center-column">
        <div class="main-product-image">
          <img src="product1Images/image copy.png" alt="Main Product" />
        </div>
      </div>

      <!-- Right Section: Product Details -->
      <div class="right-column">
        <h1 class="product-title">Pamdura</h1>
        <p class="product-price">RS. 124,500</p>
        <p class="product-description">
          Handloom Pathani An off-white paithani, with a bright contrasting red
          muniya border. Vertical resham weaves, and horizontal zari weaves.
          Adorned with 'vatana' buttas.
          <br />
          <br />Color: Offwhite & red <br />Border: Single muniya, zari
          border<br />
          Material: Resham Pallu: Contrasting colours; floral pallu
        </p>

        <!-- Add to Bag and Buy Now Buttons -->
        <div class="action-buttons">
          <button
            class="add-to-bag"
            onclick="addToCart('Saree Name', 124500, 'product.png')"
          >
            Add to Bag
          </button>
          <!-- <button class="buy-now" onclick="buyNow()">Buy Now</button> -->
        </div>
      </div>
    </main>

    <!-- Cart Drawer -->
    <div id="cart-drawer" class="cart-drawer">
      <button onclick="toggleCartDrawer()">Close</button>
      <h2>Your Cart</h2>
      <div id="cart-items-container"></div>
      <div id="cart-total">Total: Rs. 0</div>
      <button onclick="checkout()">Checkout</button>
    </div>

    <script>
      // Initialize cart from localStorage
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      updateCartCounter();

      // Add to Cart function
      function addToCart(name, price, image) {
        const existingItem = cart.find((item) => item.name === name);
        if (existingItem) {
          existingItem.quantity += 1;
        } else {
          cart.push({ name, price, image, quantity: 1 });
        }
        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartCounter();
        alert("Added to bag!");
      }

      // Update Cart Counter
      function updateCartCounter() {
        const totalItems = cart.reduce(
          (total, item) => total + item.quantity,
          0
        );
        document.getElementById("cart-counter").textContent = totalItems;
      }

      // Toggle Cart Drawer
      function toggleCartDrawer() {
        const cartDrawer = document.getElementById("cart-drawer");
        cartDrawer.classList.toggle("show");
        renderCartItems();
      }

      // Render Cart Items in Cart Drawer
      function renderCartItems() {
        const cartItemsContainer = document.getElementById(
          "cart-items-container"
        );
        cartItemsContainer.innerHTML = ""; // Clear previous items

        cart.forEach((item) => {
          const cartItem = document.createElement("div");
          cartItem.classList.add("cart-item");
          cartItem.innerHTML = `
            <img src="${item.image}" alt="${item.name}">
            <div class="cart-item-details">
              <h4>${item.name}</h4>
              <p>Price: Rs. ${item.price}</p>
            </div>
            <div class="cart-item-quantity">
              <button onclick="updateQuantity('${item.name}', -1)">-</button>
              <span>${item.quantity}</span>
              <button onclick="updateQuantity('${item.name}', 1)">+</button>
            </div>
          `;
          cartItemsContainer.appendChild(cartItem);
        });

        // Update total price
        const totalPrice = cart.reduce(
          (total, item) => total + item.price * item.quantity,
          0
        );
        document.getElementById(
          "cart-total"
        ).textContent = `Total: Rs. ${totalPrice}`;
      }

      // Update Quantity in Cart
      function updateQuantity(name, change) {
        const item = cart.find((item) => item.name === name);
        if (item) {
          item.quantity += change;
          if (item.quantity <= 0) {
            cart = cart.filter((i) => i.name !== name); // Remove item if quantity is 0
          }
          localStorage.setItem("cart", JSON.stringify(cart));
          renderCartItems();
          updateCartCounter();
        }
      }

      // Buy Now function
      function buyNow() {
        // Calculate total price and store it in localStorage
        const totalPrice = cart.reduce(
          (total, item) => total + item.price * item.quantity,
          0
        );
        localStorage.setItem("totalPrice", totalPrice); // Store total price in localStorage

        // Redirect to form.html for contact details
        window.location.href = "form.html";
      }

      // Checkout function (can be called from the Cart Drawer)
      function checkout() {
        // Same logic for checkout, store total and redirect to form.html
        const totalPrice = cart.reduce(
          (total, item) => total + item.price * item.quantity,
          0
        );
        localStorage.setItem("totalPrice", totalPrice); // Store total price in localStorage
        window.location.href = "form.html";
      }
    </script>
  </body>
</html>
